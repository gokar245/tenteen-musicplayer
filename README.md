# TenTeen ðŸŽµ

A premium, invite-only music streaming platform built with the MERN stack.

## Features

- **Invite-Only Access**: No public registration. Users need invite codes generated by admins.
- **User-Uploaded Music**: Only MP3, M4A, and WAV files uploaded by users.
- **Cloudinary Storage**: Audio and images stored in Cloudinary (configurable local fallback).
- **HTTP Byte-Range Streaming**: Proper audio seeking with 206 Partial Content.
- **Persistent Audio Player**: Music continues playing across page navigation.
- **Sleep Timer**: Set a timer to automatically pause music after a set duration.
- **Playlist Management**: Create and manage playlists, add songs directly from player.
- **Admin Dashboard**: Full admin panel with:
  - Pending upload approval workflow
  - User management
  - Upload settings (enable/disable, auto-approve)
  - Dashboard statistics
- **Spotify-Inspired UI**: Sidebar + content + bottom player layout.
- **Apple-Like Smoothness**: Subtle animations and transitions.
- **Dynamic Album Colors**: Accent colors extracted from album artwork.
- **No Ads, No Tracking**: Completely ad-free and private.

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | React 18 + Vite 5 |
| Routing | React Router 6 |
| Styling | Vanilla CSS (Custom Design System) |
| Backend | Node.js 20 + Express 4 |
| Database | MongoDB (Atlas Free Tier) |
| Auth | JWT |
| Upload | Multer |
| Storage | Cloudinary / Local |
| Audio Metadata | music-metadata |

## Color Palette

- **Background**: `#F1F6F9`
- **Dark Sections**: `#212A3E`
- **Cards/Surfaces**: `#394867`
- **Text/Icons**: `#9BA4B5`
- **Accent**: `#4a90d9` (Blue)
- **No Green** used anywhere in the app.

## Getting Started

### Prerequisites

- Node.js 18+
- MongoDB (local or Atlas)
- Cloudinary account (free tier available)

### Installation

1. **Clone the repository**
   ```bash
   git clone <repo-url>
   cd TenTeen
   ```

2. **Install server dependencies**
   ```bash
   cd server
   npm install
   ```

3. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env with your configuration
   ```

4. **Create admin user**
   ```bash
   npm run seed
   # Follow prompts to create first admin
   ```

5. **Start server**
   ```bash
   npm run dev
   ```

6. **Install client dependencies** (new terminal)
   ```bash
   cd client
   npm install
   ```

7. **Start client**
   ```bash
   npm run dev
   ```

8. **Open app**
   - Frontend: http://localhost:5173
   - Backend: http://localhost:5000

### First Time Setup

1. Login with admin credentials created in step 4
2. Go to Admin Panel â†’ Settings â†’ Enable Uploads
3. Generate invite codes for new users
4. Upload your first songs!

### Migration to Cloudinary

If you have existing local files and want to migrate to Cloudinary:

```bash
# Dry run (preview what will be migrated)
node scripts/migrate-to-cloudinary.js --dry-run

# Actual migration
node scripts/migrate-to-cloudinary.js
```

## Project Structure

```
TenTeen/
â”œâ”€â”€ server/                 # Backend
â”‚   â”œâ”€â”€ config/            # Database config
â”‚   â”œâ”€â”€ middleware/        # Auth, validation, rate limiting
â”‚   â”œâ”€â”€ models/            # MongoDB schemas
â”‚   â”œâ”€â”€ routes/            # API endpoints
â”‚   â”œâ”€â”€ services/          # Storage abstraction (Cloudinary)
â”‚   â”œâ”€â”€ scripts/           # Admin seed, migration scripts
â”‚   â””â”€â”€ index.js           # Entry point
â”‚
â”œâ”€â”€ client/                # Frontend
â”‚   â”œâ”€â”€ public/            # Static assets
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/    # React components
â”‚       â”‚   â”œâ”€â”€ common/    # Buttons, spinners
â”‚       â”‚   â”œâ”€â”€ layout/    # Sidebar, TopBar, Player
â”‚       â”‚   â””â”€â”€ music/     # Cards, rows, modals
â”‚       â”œâ”€â”€ context/       # Auth & Audio providers
â”‚       â”œâ”€â”€ pages/         # Route pages (incl. Admin)
â”‚       â”œâ”€â”€ services/      # API client
â”‚       â””â”€â”€ styles/        # CSS design system
â”‚
â””â”€â”€ README.md
```

## API Endpoints

### Auth
- `POST /api/auth/register` - Register with invite code
- `POST /api/auth/login` - Login
- `GET /api/auth/me` - Get current user

### Songs
- `GET /api/songs` - List songs
- `GET /api/songs/:id` - Get song
- `POST /api/songs/history` - Record playback
- `GET /api/songs/history/recent` - Get recent plays

### Media
- `GET /api/media` - List approved media
- `GET /api/media/:id` - Get media details
- `GET /api/media/:id/url` - Get streaming URL

### Stream
- `GET /api/stream/:songId` - Stream audio (supports byte-range)

### Upload
- `POST /api/upload/audio` - Upload song (supports cover, artist, album images)
- `POST /api/upload/image` - Upload standalone image
- `GET /api/upload/settings` - Get upload configuration

### Admin
- `GET /api/admin/stats` - Dashboard statistics
- `GET /api/admin/pending` - List pending uploads
- `POST /api/admin/approve/:id` - Approve upload
- `DELETE /api/admin/reject/:id` - Reject and delete upload
- `PATCH /api/admin/edit/:id` - Edit media metadata
- `POST /api/admin/approve-all` - Approve all pending
- `GET /api/admin/settings` - Get admin settings
- `POST /api/admin/settings` - Update settings
- `GET /api/admin/users` - List users
- `POST /api/admin/invite` - Generate invite code

## Deployment

### Free Tier Options

| Service | Use For |
|---------|---------|
| Render | Backend hosting |
| Vercel | Frontend hosting |
| MongoDB Atlas | Database (M0 free) |
| Cloudinary | Audio/Image storage (25GB free) |

### Environment Variables

**Server (.env)**
```
# Database
MONGODB_URI=mongodb+srv://...

# Auth
JWT_SECRET=your-secret-key

# Server
PORT=5000
NODE_ENV=production
MAX_FILE_SIZE_MB=50

# Storage (local or cloudinary)
STORAGE_TYPE=cloudinary

# Cloudinary (required if STORAGE_TYPE=cloudinary)
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# Frontend URL for CORS
FRONTEND_URL=https://your-frontend.vercel.app
```

**Client**
- No env needed (uses Vite proxy in dev, same-origin in prod)

## License

Private. All rights reserved.

